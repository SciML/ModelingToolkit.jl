<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Building and solving numerical problems · ModelingToolkit.jl</title><meta name="title" content="Building and solving numerical problems · ModelingToolkit.jl"/><meta property="og:title" content="Building and solving numerical problems · ModelingToolkit.jl"/><meta property="twitter:title" content="Building and solving numerical problems · ModelingToolkit.jl"/><meta name="description" content="Documentation for ModelingToolkit.jl."/><meta property="og:description" content="Documentation for ModelingToolkit.jl."/><meta property="twitter:description" content="Documentation for ModelingToolkit.jl."/><meta property="og:url" content="https://docs.sciml.ai/ModelingToolkit/stable/API/problems/"/><meta property="twitter:url" content="https://docs.sciml.ai/ModelingToolkit/stable/API/problems/"/><link rel="canonical" href="https://docs.sciml.ai/ModelingToolkit/stable/API/problems/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ModelingToolkit.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ModelingToolkit.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../tutorials/ode_modeling/">Getting Started with ModelingToolkit.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/acausal_components/">Acausal Component-Based Modeling</a></li><li><a class="tocitem" href="../../tutorials/nonlinear/">Modeling Nonlinear Systems</a></li><li><a class="tocitem" href="../../tutorials/initialization/">Initialization of Systems</a></li><li><a class="tocitem" href="../../tutorials/optimization/">Modeling Optimization Problems</a></li><li><a class="tocitem" href="../../tutorials/modelingtoolkitize/">Modelingtoolkitize: Automatically Translating Numerical to Symbolic Code</a></li><li><a class="tocitem" href="../../tutorials/programmatically_generating/">Programmatically Generating and Scripting Systems</a></li><li><a class="tocitem" href="../../tutorials/stochastic_diffeq/">Modeling with Stochasticity</a></li><li><a class="tocitem" href="../../tutorials/dynamic_optimization/">Solving Dynamic Optimization Problems</a></li><li><a class="tocitem" href="../../tutorials/discrete_system/">(Experimental) Modeling Discrete Systems</a></li><li><a class="tocitem" href="../../tutorials/parameter_identifiability/">Parameter Identifiability in ODE Models</a></li><li><a class="tocitem" href="../../tutorials/change_independent_variable/">Changing the independent variable of ODEs</a></li><li><a class="tocitem" href="../../tutorials/bifurcation_diagram_computation/">Bifurcation Diagrams</a></li><li><a class="tocitem" href="../../tutorials/attractors/">Multi- and Nonlocal- Continuation</a></li><li><a class="tocitem" href="../../tutorials/SampledData/">Clocks and Sampled-Data Systems</a></li><li><a class="tocitem" href="../../tutorials/domain_connections/">Domains</a></li><li><a class="tocitem" href="../../tutorials/callable_params/">Callable parameters and interpolating data</a></li><li><a class="tocitem" href="../../tutorials/linear_analysis/">Linear Analysis</a></li><li><a class="tocitem" href="../../tutorials/disturbance_modeling/">Disturbance and input modeling modeling</a></li><li><a class="tocitem" href="../../tutorials/fmi/">Importing FMUs</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Basic Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/higher_order/">Automatic Transformation of Nth Order ODEs to 1st Order ODEs</a></li><li><a class="tocitem" href="../../examples/spring_mass/">Component-Based Modeling of a Spring-Mass System</a></li><li><a class="tocitem" href="../../examples/modelingtoolkitize_index_reduction/">Automated Index Reduction of DAEs</a></li><li><a class="tocitem" href="../../examples/remake/">Optimizing through an ODE solve and re-creating MTK Problems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Advanced Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/tearing_parallelism/">Exposing More Parallelism By Tearing Algebraic Equations in Systems</a></li><li><a class="tocitem" href="../../examples/sparse_jacobians/">Automated Sparse Analytical Jacobians</a></li><li><a class="tocitem" href="../../examples/perturbation/">Symbolic-Numeric Perturbation Theory for ODEs</a></li></ul></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../System/">The <code>System</code> type</a></li><li><a class="tocitem" href="../variables/">Symbolic variables and variable metadata</a></li><li><a class="tocitem" href="../model_building/">Model building reference</a></li><li class="is-active"><a class="tocitem" href>Building and solving numerical problems</a><ul class="internal"><li><a class="tocitem" href="#Dynamical-systems"><span>Dynamical systems</span></a></li><li><a class="tocitem" href="#Linear-and-Nonlinear-systems"><span>Linear and Nonlinear systems</span></a></li><li><a class="tocitem" href="#Optimization-and-optimal-control"><span>Optimization and optimal control</span></a></li><li><a class="tocitem" href="#The-state-vector-and-parameter-object"><span>The state vector and parameter object</span></a></li><li><a class="tocitem" href="#Initialization"><span>Initialization</span></a></li><li><a class="tocitem" href="#Linear-analysis"><span>Linear analysis</span></a></li></ul></li><li><a class="tocitem" href="../dynamic_opt/">Dynamic Optimization Solvers</a></li><li><a class="tocitem" href="../codegen/">Code generation utilities</a></li><li><a class="tocitem" href="../PDESystem/">PDESystem</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../basics/Composition/">Composing Models and Building Reusable Components</a></li><li><a class="tocitem" href="../../basics/Events/">Event Handling and Callback Functions</a></li><li><a class="tocitem" href="../../basics/Linearization/">Linearization</a></li><li><a class="tocitem" href="../../basics/InputOutput/">Input output</a></li><li><a class="tocitem" href="../../basics/MTKLanguage/">ModelingToolkit Language: Modeling with <code>@mtkmodel</code>, <code>@connectors</code> and <code>@mtkcompile</code></a></li><li><a class="tocitem" href="../../basics/Validation/">Model Validation and Units</a></li><li><a class="tocitem" href="../../basics/Debugging/">Debugging</a></li><li><a class="tocitem" href="../../basics/DependencyGraphs/">Dependency Graphs</a></li><li><a class="tocitem" href="../../basics/Precompilation/">Working with Precompilation and Binary Building</a></li><li><a class="tocitem" href="../../basics/FAQ/">Frequently Asked Questions</a></li></ul></li><li><a class="tocitem" href="../../comparison/">Comparison of ModelingToolkit vs Equation-Based and Block Modeling Languages</a></li><li><span class="tocitem">Internal Details</span><ul><li><a class="tocitem" href="../../internals/">Internal Details</a></li><li><a class="tocitem" href="../../internals/structural_transformation/">Structural Transformation</a></li><li><a class="tocitem" href="../../internals/bipartite_graph/">Bipartite Graphs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Building and solving numerical problems</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Building and solving numerical problems</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/ModelingToolkit.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/ModelingToolkit.jl/blob/master/docs/src/API/problems.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Building-and-solving-numerical-problems"><a class="docs-heading-anchor" href="#Building-and-solving-numerical-problems">Building and solving numerical problems</a><a id="Building-and-solving-numerical-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Building-and-solving-numerical-problems" title="Permalink"></a></h1><p>Systems are numerically solved by building and solving the appropriate problem type. Numerical solvers expect to receive functions taking a predefeined set of arguments and returning specific values. This format of argument and return value depends on the function and the problem. ModelingToolkit is capable of compiling and generating code for a variety of such numerical problems.</p><h2 id="Dynamical-systems"><a class="docs-heading-anchor" href="#Dynamical-systems">Dynamical systems</a><a id="Dynamical-systems-1"></a><a class="docs-heading-anchor-permalink" href="#Dynamical-systems" title="Permalink"></a></h2><div class="admonition is-warning" id="Missing-docstring.-5bba7dfabf03fc6"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-5bba7dfabf03fc6" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.ODEFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-b52c66ba5a8a231e"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-b52c66ba5a8a231e" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.ODEProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-508725931ea7af01"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-508725931ea7af01" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.DAEFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-aa474310f621c2d5"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-aa474310f621c2d5" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.DAEProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><article><details class="docstring"><summary id="ModelingToolkit.SemilinearODEFunction"><a class="docstring-binding" href="#ModelingToolkit.SemilinearODEFunction"><code>ModelingToolkit.SemilinearODEFunction</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ModelingToolkit.SemilinearODEFunction(sys::System; kwargs...)
ModelingToolkit.SemilinearODEFunction{iip}(sys::System; kwargs...)
ModelingToolkit.SemilinearODEFunction{iip, specialize}(sys::System; kwargs...)</code></pre><p>Create a <code>ModelingToolkit.SemilinearODEFunction</code> from the given <code>sys</code>. <code>iip</code> is a boolean indicating whether the function should be in-place. <code>specialization</code> is a <code>SciMLBase.AbstractSpecalize</code> subtype indicating the level of specialization of the ModelingToolkit.SemilinearODEFunction.</p><p>This is a special form of an ODE which uses a <code>SplitFunction</code> internally. The equations are separated into linear, quadratic and general terms and phrased as matrix operations. See <a href="@ref"><code>calculate_semiquadratic_form</code></a> for information on how the equations are split. This formulation allows leveraging split ODE solvers such as <code>KenCarp4</code> and is useful for systems where the stiff and non-stiff terms can be separated out in such a manner. Typically the linear part of the equations is the stiff part, but the keywords <code>stiff_linear</code>, <code>stiff_quadratic</code> and <code>stiff_nonlinear</code> can be used to control which parts are considered as stiff.</p><p>Beyond the arguments listed below, this constructor accepts all keyword arguments supported by the DifferentialEquations.jl <code>solve</code> function. For a complete list and detailed descriptions, see the <a href="https://docs.sciml.ai/DiffEqDocs/stable/basics/common_solver_opts/">DifferentialEquations.jl solve documentation</a>.</p><p><strong>Keyword arguments</strong></p><ul><li><p><code>u0</code>: The <code>u0</code> vector for the corresponding problem, if available. Can be obtained using <a href="@ref"><code>ModelingToolkitBase.get_u0</code></a>.</p></li><li><p><code>p</code>: The parameter object for the corresponding problem, if available. Can be obtained using <a href="@ref"><code>ModelingToolkitBase.get_p</code></a>.</p></li><li><p><code>t</code>: The initial time for the corresponding problem, if available.</p></li><li><p><code>eval_expression</code>: Whether to compile any functions via <code>eval</code> or <code>RuntimeGeneratedFunctions</code>.</p></li><li><p><code>eval_module</code>: If <code>eval_expression == true</code>, the module to <code>eval</code> into. Otherwise, the module in which to generate the <code>RuntimeGeneratedFunction</code>.</p></li><li><p><code>checkbounds</code>: Whether to enable bounds checking in the generated code.</p></li><li><p><code>simplify</code>: Whether to <code>simplify</code> any symbolically computed jacobians/hessians/etc.</p></li><li><p><code>cse</code>: Whether to enable Common Subexpression Elimination (CSE) on the generated code. This typically improves performance of the generated code but reduces readability.</p></li><li><p><code>sparse</code>: Whether to generate jacobian/hessian/etc. functions that return/operate on sparse matrices. Also controls whether the mass matrix is sparse, wherever applicable.</p></li><li><p><code>check_compatibility</code>: Whether to check if the given system <code>sys</code> contains all the information necessary to create a <code>ModelingToolkit.SemilinearODEFunction</code> and no more. If disabled, assumes that <code>sys</code> at least contains the necessary information.</p></li><li><p><code>expression</code>: <code>Val{true}</code> to return an <code>Expr</code> that constructs the corresponding problem instead of the problem itself. <code>Val{false}</code> otherwise.  Constructing the expression does not support callbacks</p></li><li><p><code>jac</code>: Whether to symbolically compute and generate code for the jacobian function.</p></li><li><p><code>sparsity</code>: Whether to provide symbolically compute and provide sparsity patterns for the jacobian/hessian/etc.</p></li><li><p><code>stiff_linear</code>: Whether the linear part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no linear part.</p></li><li><p><code>stiff_quadratic</code>: Whether the quadratic part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no quadratic part.</p></li><li><p><code>stiff_nonlinear</code>: Whether the non-linear non-quadratic part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no such non-linear non-quadratic part.</p></li><li><p><code>kwargs...</code>: Additional keyword arguments passed to the solver</p></li></ul><p>All other keyword arguments are forwarded to the <code>ModelingToolkit.SemilinearODEFunction</code> struct constructor. Note that all three of <code>stiff_linear</code>, <code>stiff_quadratic</code>, <code>stiff_nonlinear</code> cannot be identical, and at least two of <code>A</code>, <code>B</code>, <code>C</code> returned from <a href="@ref"><code>calculate_semiquadratic_form</code></a> must be non-<code>nothing</code>. In other words, both of the functions in the split form must be non-empty.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/problems/docs.jl#L66-L134">source</a></section></details></article><article><details class="docstring"><summary id="ModelingToolkit.SemilinearODEProblem"><a class="docstring-binding" href="#ModelingToolkit.SemilinearODEProblem"><code>ModelingToolkit.SemilinearODEProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SciMLBase.ModelingToolkit.SemilinearODEProblem(sys::System, op, tspan::NTuple{2}; kwargs...)
SciMLBase.ModelingToolkit.SemilinearODEProblem{iip}(sys::System, op, tspan::NTuple{2}; kwargs...)
SciMLBase.ModelingToolkit.SemilinearODEProblem{iip, specialize}(sys::System, op, tspan::NTuple{2}; kwargs...)</code></pre><p>Build a <code>ModelingToolkit.SemilinearODEProblem</code> given a system <code>sys</code> and operating point <code>op</code>  and timespan <code>tspan</code>. <code>iip</code> is a boolean indicating whether the problem should be in-place. <code>specialization</code> is a <code>SciMLBase.AbstractSpecalize</code> subtype indicating the level of specialization of the ModelingToolkit.SemilinearODEFunction. The operating point should be an iterable collection of key-value pairs mapping variables/parameters in the system to the (initial) values they should take in <code>ModelingToolkit.SemilinearODEProblem</code>. Any values not provided will fallback to the corresponding default (if present).</p><p>ModelingToolkitBase will build an initialization problem where all initial values for unknowns or observables of <code>sys</code> (either explicitly provided or in defaults) will be constraints. To remove an initial condition in the defaults (without providing a replacement) give the corresponding variable a value of <code>nothing</code> in the operating point. The initialization problem will also run parameter initialization. See the <a href="../../tutorials/initialization/#initialization">Initialization</a> documentation for more information.</p><p>This is a special form of an ODE which uses a <code>SplitFunction</code> internally. The equations are separated into linear, quadratic and general terms and phrased as matrix operations. See <a href="@ref"><code>calculate_semiquadratic_form</code></a> for information on how the equations are split. This formulation allows leveraging split ODE solvers such as <code>KenCarp4</code> and is useful for systems where the stiff and non-stiff terms can be separated out in such a manner. Typically the linear part of the equations is the stiff part, but the keywords <code>stiff_linear</code>, <code>stiff_quadratic</code> and <code>stiff_nonlinear</code> can be used to control which parts are considered as stiff.</p><p><strong>Keyword arguments</strong></p><ul><li><p><code>eval_expression</code>: Whether to compile any functions via <code>eval</code> or <code>RuntimeGeneratedFunctions</code>.</p></li><li><p><code>eval_module</code>: If <code>eval_expression == true</code>, the module to <code>eval</code> into. Otherwise, the module in which to generate the <code>RuntimeGeneratedFunction</code>.</p></li><li><p><code>guesses</code>: The guesses for variables in the system, used as initial values for the initialization problem.</p></li><li><p><code>warn_initialize_determined</code>: Warn if the initialization system is under/over-determined.</p></li><li><p><code>initialization_eqs</code>: Extra equations to use in the initialization problem.</p></li><li><p><code>fully_determined</code>: Override whether the initialization system is fully determined.</p></li><li><p><code>use_scc</code>: Whether to use <code>SCCNonlinearProblem</code> for initialization if the system is fully determined.</p></li><li><p><code>check_initialization_units</code>: Enable or disable unit checks when constructing the initialization problem.</p></li><li><p><code>tofloat</code>: Passed to <a href="@ref"><code>varmap_to_vars</code></a> when building the parameter vector of a non-split system.</p></li><li><p><code>u0_eltype</code>: The <code>eltype</code> of the <code>u0</code> vector. If <code>nothing</code>, finds the promoted floating point type from <code>op</code>.</p></li><li><p><code>u0_constructor</code>: A function to apply to the <code>u0</code> value returned from <a href="@ref"><code>varmap_to_vars</code></a>. to construct the final <code>u0</code> value.</p></li><li><p><code>p_constructor</code>: A function to apply to each array buffer created when constructing the parameter object.</p></li><li><p><code>warn_cyclic_dependency</code>: Whether to emit a warning listing out cycles in initial conditions provided for unknowns and parameters.</p></li><li><p><code>circular_dependency_max_cycle_length</code>: Maximum length of cycle to check for. Only applicable if <code>warn_cyclic_dependency == true</code>.</p></li><li><p><code>circular_dependency_max_cycles</code>: Maximum number of cycles to check for. Only applicable if <code>warn_cyclic_dependency == true</code>.</p></li><li><p><code>substitution_limit</code>: The number times to substitute initial conditions into each other to attempt to arrive at a numeric value.</p></li><li><p><code>missing_guess_value</code>: An instance of <a href="@ref"><code>MissingGuessValue</code></a> which indicates what happens when the initialization problem is missing guess values for variables.</p></li><li><p><code>initsys_mtkcompile_kwargs</code>: A <code>NamedTuple</code> of keyword arguments to pass to <code>mtkcompile</code> when it is called on the initialization system.</p></li><li><p><code>callback</code>: An extra callback or <code>CallbackSet</code> to add to the problem, in addition to the ones defined symbolically in the system.</p></li><li><p><code>check_compatibility</code>: Whether to check if the given system <code>sys</code> contains all the information necessary to create a <code>ModelingToolkit.SemilinearODEProblem</code> and no more. If disabled, assumes that <code>sys</code> at least contains the necessary information.</p></li><li><p><code>expression</code>: <code>Val{true}</code> to return an <code>Expr</code> that constructs the corresponding problem instead of the problem itself. <code>Val{false}</code> otherwise.  Constructing the expression does not support callbacks</p></li><li><p><code>stiff_linear</code>: Whether the linear part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no linear part.</p></li><li><p><code>stiff_quadratic</code>: Whether the quadratic part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no quadratic part.</p></li><li><p><code>stiff_nonlinear</code>: Whether the non-linear non-quadratic part of the equations should be part of the stiff function in the split form. Has no effect if the equations have no such non-linear non-quadratic part.</p></li></ul><p>All other keyword arguments are forwarded to the ModelingToolkit.SemilinearODEFunction constructor. Note that all three of <code>stiff_linear</code>, <code>stiff_quadratic</code>, <code>stiff_nonlinear</code> cannot be identical, and at least two of <code>A</code>, <code>B</code>, <code>C</code> returned from <a href="@ref"><code>calculate_semiquadratic_form</code></a> must be non-<code>nothing</code>. In other words, both of the functions in the split form must be non-empty.</p><p><strong>Extended docs</strong></p><p>The following API is internal and may change or be removed without notice. Its usage is highly discouraged.</p><ul><li><code>build_initializeprob</code>: If <code>false</code>, avoids building the initialization problem.</li><li><code>check_length</code>: Whether to check the number of equations along with number of unknowns and length of <code>u0</code> vector for consistency. If <code>false</code>, do not check with equations. This is forwarded to <code>check_eqs_u0</code>.</li><li><code>return_operating_point</code>: Whether to also return the updated operating point.</li><li><code>time_dependent_init</code>: Whether to build a time-dependent initialization for the problem. A time-dependent initialization solves for a consistent <code>u0</code>, whereas a time-independent one only runs parameter initialization.</li><li><code>algebraic_only</code>: Whether to build the initialization problem using only algebraic equations.</li><li><code>allow_incomplete</code>: Whether to allow incomplete initialization problems.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/problems/docs.jl#L47-L159">source</a></section></details></article><div class="admonition is-warning" id="Missing-docstring.-3461dde7e75d832"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-3461dde7e75d832" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.SDEFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-6bd56a6fd80581d5"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-6bd56a6fd80581d5" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.SDEProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-1275c06c745277d8"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-1275c06c745277d8" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.DDEFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-1737626d2ef9be04"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-1737626d2ef9be04" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.DDEProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-294633036b2233e4"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-294633036b2233e4" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.SDDEFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-9543f8862ef51a7a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-9543f8862ef51a7a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.SDDEProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a8a99be2e29ba732"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a8a99be2e29ba732" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>JumpProcesses.JumpProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-1e53bef7b335560b"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-1e53bef7b335560b" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.BVProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-882f3e0446a7d072"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-882f3e0446a7d072" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.DiscreteProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-e5ac68241dce8d55"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e5ac68241dce8d55" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.ImplicitDiscreteProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Linear-and-Nonlinear-systems"><a class="docs-heading-anchor" href="#Linear-and-Nonlinear-systems">Linear and Nonlinear systems</a><a id="Linear-and-Nonlinear-systems-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-and-Nonlinear-systems" title="Permalink"></a></h2><div class="admonition is-warning" id="Missing-docstring.-7b4867dd5bb4d9e1"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-7b4867dd5bb4d9e1" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.NonlinearFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-ba3ff07cca2db64d"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ba3ff07cca2db64d" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.NonlinearProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><article><details class="docstring"><summary id="SciMLBase.SCCNonlinearProblem"><a class="docstring-binding" href="#SciMLBase.SCCNonlinearProblem"><code>SciMLBase.SCCNonlinearProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SciMLBase.SciMLBase.SCCNonlinearProblem(sys::System, op; kwargs...)
SciMLBase.SciMLBase.SCCNonlinearProblem{iip}(sys::System, op; kwargs...)
SciMLBase.SciMLBase.SCCNonlinearProblem{iip, specialize}(sys::System, op; kwargs...)</code></pre><p>Build a <code>SciMLBase.SCCNonlinearProblem</code> given a system <code>sys</code> and operating point <code>op</code> . <code>iip</code> is a boolean indicating whether the problem should be in-place. <code>specialization</code> is a <code>SciMLBase.AbstractSpecalize</code> subtype indicating the level of specialization of the SciMLBase.NonlinearFunction. The operating point should be an iterable collection of key-value pairs mapping variables/parameters in the system to the (initial) values they should take in <code>SciMLBase.SCCNonlinearProblem</code>. Any values not provided will fallback to the corresponding default (if present).</p><p><strong>Keyword arguments</strong></p><ul><li><p><code>eval_expression</code>: Whether to compile any functions via <code>eval</code> or <code>RuntimeGeneratedFunctions</code>.</p></li><li><p><code>eval_module</code>: If <code>eval_expression == true</code>, the module to <code>eval</code> into. Otherwise, the module in which to generate the <code>RuntimeGeneratedFunction</code>.</p></li><li><p><code>guesses</code>: The guesses for variables in the system, used as initial values for the initialization problem.</p></li><li><p><code>warn_initialize_determined</code>: Warn if the initialization system is under/over-determined.</p></li><li><p><code>initialization_eqs</code>: Extra equations to use in the initialization problem.</p></li><li><p><code>fully_determined</code>: Override whether the initialization system is fully determined.</p></li><li><p><code>use_scc</code>: Whether to use <code>SCCNonlinearProblem</code> for initialization if the system is fully determined.</p></li><li><p><code>check_initialization_units</code>: Enable or disable unit checks when constructing the initialization problem.</p></li><li><p><code>tofloat</code>: Passed to <a href="@ref"><code>varmap_to_vars</code></a> when building the parameter vector of a non-split system.</p></li><li><p><code>u0_eltype</code>: The <code>eltype</code> of the <code>u0</code> vector. If <code>nothing</code>, finds the promoted floating point type from <code>op</code>.</p></li><li><p><code>u0_constructor</code>: A function to apply to the <code>u0</code> value returned from <a href="@ref"><code>varmap_to_vars</code></a>. to construct the final <code>u0</code> value.</p></li><li><p><code>p_constructor</code>: A function to apply to each array buffer created when constructing the parameter object.</p></li><li><p><code>warn_cyclic_dependency</code>: Whether to emit a warning listing out cycles in initial conditions provided for unknowns and parameters.</p></li><li><p><code>circular_dependency_max_cycle_length</code>: Maximum length of cycle to check for. Only applicable if <code>warn_cyclic_dependency == true</code>.</p></li><li><p><code>circular_dependency_max_cycles</code>: Maximum number of cycles to check for. Only applicable if <code>warn_cyclic_dependency == true</code>.</p></li><li><p><code>substitution_limit</code>: The number times to substitute initial conditions into each other to attempt to arrive at a numeric value.</p></li><li><p><code>missing_guess_value</code>: An instance of <a href="@ref"><code>MissingGuessValue</code></a> which indicates what happens when the initialization problem is missing guess values for variables.</p></li><li><p><code>initsys_mtkcompile_kwargs</code>: A <code>NamedTuple</code> of keyword arguments to pass to <code>mtkcompile</code> when it is called on the initialization system.</p></li></ul><ul><li><code>check_compatibility</code>: Whether to check if the given system <code>sys</code> contains all the information necessary to create a <code>SciMLBase.SCCNonlinearProblem</code> and no more. If disabled, assumes that <code>sys</code> at least contains the necessary information.</li><li><code>expression</code>: <code>Val{true}</code> to return an <code>Expr</code> that constructs the corresponding problem instead of the problem itself. <code>Val{false}</code> otherwise.</li></ul><p>All other keyword arguments are forwarded to the SciMLBase.NonlinearFunction constructor.</p><p><strong>Extended docs</strong></p><p>The following API is internal and may change or be removed without notice. Its usage is highly discouraged.</p><ul><li><code>build_initializeprob</code>: If <code>false</code>, avoids building the initialization problem.</li><li><code>check_length</code>: Whether to check the number of equations along with number of unknowns and length of <code>u0</code> vector for consistency. If <code>false</code>, do not check with equations. This is forwarded to <code>check_eqs_u0</code>.</li><li><code>return_operating_point</code>: Whether to also return the updated operating point.</li><li><code>time_dependent_init</code>: Whether to build a time-dependent initialization for the problem. A time-dependent initialization solves for a consistent <code>u0</code>, whereas a time-independent one only runs parameter initialization.</li><li><code>algebraic_only</code>: Whether to build the initialization problem using only algebraic equations.</li><li><code>allow_incomplete</code>: Whether to allow incomplete initialization problems.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/problems/docs.jl#L47-L134">source</a></section></details></article><div class="admonition is-warning" id="Missing-docstring.-f236f691d89fd138"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-f236f691d89fd138" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.NonlinearLeastSquaresProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-e7f728a23be654cb"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e7f728a23be654cb" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.SteadyStateProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-4fed7272c2065f80"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-4fed7272c2065f80" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.IntervalNonlinearFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-2e103df8aa42884d"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-2e103df8aa42884d" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.IntervalNonlinearProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a0bfb6f1e964e28b"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a0bfb6f1e964e28b" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.HomotopyContinuationProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-ef64cbd7a0b3dcf7"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ef64cbd7a0b3dcf7" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.HomotopyNonlinearFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-b9b76b993feccebd"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-b9b76b993feccebd" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.LinearProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Optimization-and-optimal-control"><a class="docs-heading-anchor" href="#Optimization-and-optimal-control">Optimization and optimal control</a><a id="Optimization-and-optimal-control-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-and-optimal-control" title="Permalink"></a></h2><div class="admonition is-warning" id="Missing-docstring.-2e35a0be582e8c9a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-2e35a0be582e8c9a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.OptimizationFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-c7b898478d1aed3"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-c7b898478d1aed3" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.OptimizationProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-cba473aa3f85c81a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-cba473aa3f85c81a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>SciMLBase.ODEInputFunction</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-eed64f8d4e36afd3"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-eed64f8d4e36afd3" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.JuMPDynamicOptProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-a3d3247932972e9a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-a3d3247932972e9a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.InfiniteOptDynamicOptProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-f6fff87da128f044"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-f6fff87da128f044" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.CasADiDynamicOptProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-555e091a7ab16526"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-555e091a7ab16526" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.DynamicOptSolution</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="The-state-vector-and-parameter-object"><a class="docs-heading-anchor" href="#The-state-vector-and-parameter-object">The state vector and parameter object</a><a id="The-state-vector-and-parameter-object-1"></a><a class="docs-heading-anchor-permalink" href="#The-state-vector-and-parameter-object" title="Permalink"></a></h2><p>Typically the unknowns of the system are present as a <code>Vector</code> of the appropriate length in the numerical problem. The state vector can also be constructed manually without building a problem.</p><div class="admonition is-warning" id="Missing-docstring.-8bc8cf9fd2b99956"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-8bc8cf9fd2b99956" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.get_u0</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-e1692b6024fa94ab"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e1692b6024fa94ab" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.varmap_to_vars</code>. Check Documenter&#39;s build log for details.</p></div></div><p>By default, the parameters of the system are stored in a custom data structure called <code>MTKParameters</code>. The internals of this data structure are undocumented, and it should only be interacted with through defined public API. SymbolicIndexingInterface.jl contains functionality useful for this purpose.</p><div class="admonition is-warning" id="Missing-docstring.-5d331f7204123bea"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-5d331f7204123bea" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>MTKParameters</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-7f54e2e406bfe63b"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-7f54e2e406bfe63b" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>ModelingToolkit.get_p</code>. Check Documenter&#39;s build log for details.</p></div></div><p>The following functions are useful when working with <code>MTKParameters</code> objects, and especially the <code>Tunables</code> portion. For more information about the &quot;portions&quot; of <code>MTKParameters</code>, refer to the <a href="https://docs.sciml.ai/SciMLStructures/stable/"><code>SciMLStructures.jl</code></a> documentation.</p><div class="admonition is-warning" id="Missing-docstring.-dfddbea688776c3d"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-dfddbea688776c3d" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>reorder_dimension_by_tunables!</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-9b2f95e0912b4537"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-9b2f95e0912b4537" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>reorder_dimension_by_tunables</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Initialization"><a class="docs-heading-anchor" href="#Initialization">Initialization</a><a id="Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization" title="Permalink"></a></h2><div class="admonition is-warning" id="Missing-docstring.-e3dfa2f29ae32dd7"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-e3dfa2f29ae32dd7" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>generate_initializesystem</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-14a6ef504dca5b05"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-14a6ef504dca5b05" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>InitializationProblem</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Linear-analysis"><a class="docs-heading-anchor" href="#Linear-analysis">Linear analysis</a><a id="Linear-analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-analysis" title="Permalink"></a></h2><article><details class="docstring"><summary id="ModelingToolkit.linearization_function"><a class="docstring-binding" href="#ModelingToolkit.linearization_function"><code>ModelingToolkit.linearization_function</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">lin_fun, simplified_sys = linearization_function(sys::AbstractSystem, inputs, outputs; simplify = false, initialize = true, initialization_solver_alg = nothing, kwargs...)</code></pre><p>Return a function that linearizes the system <code>sys</code>. The function <a href="#ModelingToolkit.linearize"><code>linearize</code></a> provides a higher-level and easier to use interface.</p><p><code>lin_fun</code> is a function <code>(variables, p, t) -&gt; (; f_x, f_z, g_x, g_z, f_u, g_u, h_x, h_z, h_u)</code>, i.e., it returns a NamedTuple with the Jacobians of <code>f,g,h</code> for the nonlinear <code>sys</code> (technically for <code>simplified_sys</code>) on the form</p><p class="math-container">\[\begin{aligned}
ẋ &amp;= f(x, z, u) \\
0 &amp;= g(x, z, u) \\
y &amp;= h(x, z, u)
\end{aligned}\]</p><p>where <code>x</code> are differential unknown variables, <code>z</code> algebraic variables, <code>u</code> inputs and <code>y</code> outputs. To obtain a linear statespace representation, see <a href="#ModelingToolkit.linearize"><code>linearize</code></a>. The input argument <code>variables</code> is a vector defining the operating point, corresponding to <code>unknowns(simplified_sys)</code> and <code>p</code> is a vector corresponding to the parameters of <code>simplified_sys</code>. Note: all variables in <code>inputs</code> have been converted to parameters in <code>simplified_sys</code>.</p><p>The <code>simplified_sys</code> has undergone <a href="../model_building/#ModelingToolkitBase.mtkcompile"><code>mtkcompile</code></a> and had any occurring input or output variables replaced with the variables provided in arguments <code>inputs</code> and <code>outputs</code>. The unknowns of this system also indicate the order of the unknowns that holds for the linearized matrices.</p><p><strong>Arguments:</strong></p><ul><li><code>sys</code>: A <a href="@ref"><code>System</code></a> of ODEs. This function will automatically apply simplification passes on <code>sys</code> and return the resulting <code>simplified_sys</code>.</li><li><code>inputs</code>: A vector of variables that indicate the inputs of the linearized input-output model.</li><li><code>outputs</code>: A vector of variables that indicate the outputs of the linearized input-output model.</li><li><code>simplify</code>: Apply simplification in tearing.</li><li><code>initialize</code>: If true, a check is performed to ensure that the operating point is consistent (satisfies algebraic equations). If the op is not consistent, initialization is performed.</li><li><code>initialization_solver_alg</code>: A NonlinearSolve algorithm to use for solving for a feasible set of state and algebraic variables that satisfies the specified operating point.</li><li><code>autodiff</code>: An <code>ADType</code> supported by DifferentiationInterface.jl to use for calculating the necessary jacobians. Defaults to using <code>AutoForwardDiff()</code></li><li><code>kwargs</code>: Are passed on to <code>find_solvables!</code></li></ul><p>See also <a href="#ModelingToolkit.linearize"><code>linearize</code></a> which provides a higher-level interface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/linearization.jl#L1-L32">source</a></section></details></article><article><details class="docstring"><summary id="ModelingToolkit.LinearizationProblem"><a class="docstring-binding" href="#ModelingToolkit.LinearizationProblem"><code>ModelingToolkit.LinearizationProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">mutable struct LinearizationProblem{F&lt;:ModelingToolkit.LinearizationFunction, T}</code></pre><p>A struct representing a linearization operation to be performed. Can be symbolically indexed to efficiently update the operating point for multiple linearizations in a loop. The value of the independent variable can be set by mutating the <code>.t</code> field of this struct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/linearization.jl#L419-L425">source</a></section></details></article><article><details class="docstring"><summary id="ModelingToolkit.linearize"><a class="docstring-binding" href="#ModelingToolkit.linearize"><code>ModelingToolkit.linearize</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">(; A, B, C, D), simplified_sys, extras = linearize(sys, inputs, outputs;    t=0.0, op = Dict(), allow_input_derivatives = false, zero_dummy_der=false, kwargs...)
(; A, B, C, D), extras                 = linearize(simplified_sys, lin_fun; t=0.0, op = Dict(), allow_input_derivatives = false, zero_dummy_der=false)</code></pre><p>Linearize <code>sys</code> between <code>inputs</code> and <code>outputs</code>, both vectors of variables. Return a NamedTuple with the matrices of a linear statespace representation on the form</p><p class="math-container">\[\begin{aligned}
ẋ &amp;= Ax + Bu\\
y &amp;= Cx + Du
\end{aligned}\]</p><p>The first signature automatically calls <a href="#ModelingToolkit.linearization_function"><code>linearization_function</code></a> internally, while the second signature expects the outputs of <a href="#ModelingToolkit.linearization_function"><code>linearization_function</code></a> as input.</p><p><code>op</code> denotes the operating point around which to linearize. If none is provided, the default values of <code>sys</code> are used.</p><p>If <code>allow_input_derivatives = false</code>, an error will be thrown if input derivatives (<span>$u̇$</span>) appear as inputs in the linearized equations. If input derivatives are allowed, the returned <code>B</code> matrix will be of double width, corresponding to the input <code>[u; u̇]</code>.</p><p><code>zero_dummy_der</code> can be set to automatically set the operating point to zero for all dummy derivatives.</p><p>The return value <code>extras</code> is a NamedTuple <code>(; x, p, t)</code> containing the result of the initialization problem that was solved to determine the operating point.</p><p>See also <a href="#ModelingToolkit.linearization_function"><code>linearization_function</code></a> which provides a lower-level interface, <a href="../../basics/Linearization/#ModelingToolkit.linearize_symbolic-basics-Linearization"><code>linearize_symbolic</code></a> and <a href="#ModelingToolkit.reorder_unknowns"><code>ModelingToolkit.reorder_unknowns</code></a>.</p><p>See extended help for an example.</p><p>The implementation and notation follows that of <a href="https://ep.liu.se/ecp/043/075/ecp09430097.pdf">&quot;Linear Analysis Approach for Modelica Models&quot;, Allain et al. 2009</a></p><p><strong>Extended help</strong></p><p>This example builds the following feedback interconnection and linearizes it from the input of <code>F</code> to the output of <code>P</code>.</p><pre><code class="nohighlight hljs">
  r ┌─────┐       ┌─────┐     ┌─────┐
───►│     ├──────►│     │  u  │     │
    │  F  │       │  C  ├────►│  P  │ y
    └─────┘     ┌►│     │     │     ├─┬─►
                │ └─────┘     └─────┘ │
                │                     │
                └─────────────────────┘</code></pre><pre><code class="language-julia hljs">using ModelingToolkit
using ModelingToolkit: t_nounits as t, D_nounits as D
function plant(; name)
    @variables x(t) = 1
    @variables u(t)=0 y(t)=0
    eqs = [D(x) ~ -x + u
           y ~ x]
    System(eqs, t; name = name)
end

function ref_filt(; name)
    @variables x(t)=0 y(t)=0
    @variables u(t)=0 [input = true]
    eqs = [D(x) ~ -2 * x + u
           y ~ x]
    System(eqs, t, name = name)
end

function controller(kp; name)
    @variables y(t)=0 r(t)=0 u(t)=0
    @parameters kp = kp
    eqs = [
        u ~ kp * (r - y),
    ]
    System(eqs, t; name = name)
end

@named f = ref_filt()
@named c = controller(1)
@named p = plant()

connections = [f.y ~ c.r # filtered reference to controller reference
               c.u ~ p.u # controller output to plant input
               p.y ~ c.y]

@named cl = System(connections, t, systems = [f, c, p])

lsys0, ssys = linearize(cl, [f.u], [p.x])
desired_order = [f.x, p.x]
lsys = ModelingToolkit.reorder_unknowns(lsys0, unknowns(ssys), desired_order)

@assert lsys.A == [-2 0; 1 -2]
@assert lsys.B == [1; 0;;]
@assert lsys.C == [0 1]
@assert lsys.D[] == 0

## Symbolic linearization
lsys_sym, _ = ModelingToolkit.linearize_symbolic(cl, [f.u], [p.x])

@assert substitute(lsys_sym.A, ModelingToolkit.defaults(cl)) == lsys.A</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/linearization.jl#L667-L767">source</a></section></details></article><div class="admonition is-warning" id="Missing-docstring.-7ab469a3c94b479a"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-7ab469a3c94b479a" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>CommonSolve.solve(::LinearizationProblem)</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-43e32e0715ac4e45"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-43e32e0715ac4e45" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>linearize_symbolic</code>. Check Documenter&#39;s build log for details.</p></div></div><p>There are also utilities for manipulating the results of these analyses in a symbolic context.</p><article><details class="docstring"><summary id="ModelingToolkit.similarity_transform"><a class="docstring-binding" href="#ModelingToolkit.similarity_transform"><code>ModelingToolkit.similarity_transform</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">(; Ã, B̃, C̃, D̃) = similarity_transform(sys, T; unitary=false)</code></pre><p>Perform a similarity transform <code>T : Tx̃ = x</code> on linear system represented by matrices in NamedTuple <code>sys</code> such that</p><pre><code class="nohighlight hljs">Ã = T⁻¹AT
B̃ = T⁻¹ B
C̃ = CT
D̃ = D</code></pre><p>If <code>unitary=true</code>, <code>T</code> is assumed unitary and the matrix adjoint is used instead of the inverse.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/linearization.jl#L813-L826">source</a></section></details></article><article><details class="docstring"><summary id="ModelingToolkit.reorder_unknowns"><a class="docstring-binding" href="#ModelingToolkit.reorder_unknowns"><code>ModelingToolkit.reorder_unknowns</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">reorder_unknowns(sys::NamedTuple, old, new)</code></pre><p>Permute the state representation of <code>sys</code> obtained from <a href="#ModelingToolkit.linearize"><code>linearize</code></a> so that the state unknown is changed from <code>old</code> to <code>new</code> Example:</p><pre><code class="nohighlight hljs">lsys, ssys = linearize(pid, [reference.u, measurement.u], [ctr_output.u])
desired_order = [int.x, der.x] # Unknowns that are present in unknowns(ssys)
lsys = ModelingToolkit.reorder_unknowns(lsys, unknowns(ssys), desired_order)</code></pre><p>See also <a href="#ModelingToolkit.similarity_transform"><code>ModelingToolkit.similarity_transform</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/2f4bcdccc66ba24787733f3214e2859c866521e5/src/linearization.jl#L841-L854">source</a></section></details></article><h3 id="Analysis-point-transformations"><a class="docs-heading-anchor" href="#Analysis-point-transformations">Analysis point transformations</a><a id="Analysis-point-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis-point-transformations" title="Permalink"></a></h3><p>Linear analysis can also be done using analysis points to perform several common workflows.</p><div class="admonition is-warning" id="Missing-docstring.-21bf194a33e78bb3"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-21bf194a33e78bb3" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_sensitivity_function</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-117b9271ae3b22e1"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-117b9271ae3b22e1" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_sensitivity</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-c95a6568a8be0b37"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-c95a6568a8be0b37" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_comp_sensitivity_function</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-94e2b60fa28da25b"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-94e2b60fa28da25b" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_comp_sensitivity</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-c0da8877d8f38ea1"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-c0da8877d8f38ea1" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_looptransfer_function</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-3b5372ca79f56b87"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-3b5372ca79f56b87" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>get_looptransfer</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning" id="Missing-docstring.-d3198008fd7cddef"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-d3198008fd7cddef" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>open_loop</code>. Check Documenter&#39;s build log for details.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../model_building/">« Model building reference</a><a class="docs-footer-nextpage" href="../dynamic_opt/">Dynamic Optimization Solvers »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 12 February 2026 08:52">Thursday 12 February 2026</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body><div data-docstringscollapsed="true"></div></html>
