<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Linear Analysis · ModelingToolkit.jl</title><meta name="title" content="Linear Analysis · ModelingToolkit.jl"/><meta property="og:title" content="Linear Analysis · ModelingToolkit.jl"/><meta property="twitter:title" content="Linear Analysis · ModelingToolkit.jl"/><meta name="description" content="Documentation for ModelingToolkit.jl."/><meta property="og:description" content="Documentation for ModelingToolkit.jl."/><meta property="twitter:description" content="Documentation for ModelingToolkit.jl."/><meta property="og:url" content="https://docs.sciml.ai/ModelingToolkit/stable/tutorials/linear_analysis/"/><meta property="twitter:url" content="https://docs.sciml.ai/ModelingToolkit/stable/tutorials/linear_analysis/"/><link rel="canonical" href="https://docs.sciml.ai/ModelingToolkit/stable/tutorials/linear_analysis/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="ModelingToolkit.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ModelingToolkit.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../ode_modeling/">Getting Started with ModelingToolkit.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../acausal_components/">Acausal Component-Based Modeling</a></li><li><a class="tocitem" href="../nonlinear/">Modeling Nonlinear Systems</a></li><li><a class="tocitem" href="../initialization/">Initialization of Systems</a></li><li><a class="tocitem" href="../optimization/">Modeling Optimization Problems</a></li><li><a class="tocitem" href="../modelingtoolkitize/">Modelingtoolkitize: Automatically Translating Numerical to Symbolic Code</a></li><li><a class="tocitem" href="../programmatically_generating/">Programmatically Generating and Scripting Systems</a></li><li><a class="tocitem" href="../stochastic_diffeq/">Modeling with Stochasticity</a></li><li><a class="tocitem" href="../dynamic_optimization/">Solving Dynamic Optimization Problems</a></li><li><a class="tocitem" href="../discrete_system/">(Experimental) Modeling Discrete Systems</a></li><li><a class="tocitem" href="../parameter_identifiability/">Parameter Identifiability in ODE Models</a></li><li><a class="tocitem" href="../change_independent_variable/">Changing the independent variable of ODEs</a></li><li><a class="tocitem" href="../bifurcation_diagram_computation/">Bifurcation Diagrams</a></li><li><a class="tocitem" href="../attractors/">Multi- and Nonlocal- Continuation</a></li><li><a class="tocitem" href="../SampledData/">Clocks and Sampled-Data Systems</a></li><li><a class="tocitem" href="../domain_connections/">Domains</a></li><li><a class="tocitem" href="../callable_params/">Callable parameters and interpolating data</a></li><li class="is-active"><a class="tocitem" href>Linear Analysis</a><ul class="internal"><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#Gain-and-phase-margins"><span>Gain and phase margins</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="../disturbance_modeling/">Disturbance and input modeling modeling</a></li><li><a class="tocitem" href="../fmi/">Importing FMUs</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Basic Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/higher_order/">Automatic Transformation of Nth Order ODEs to 1st Order ODEs</a></li><li><a class="tocitem" href="../../examples/spring_mass/">Component-Based Modeling of a Spring-Mass System</a></li><li><a class="tocitem" href="../../examples/modelingtoolkitize_index_reduction/">Automated Index Reduction of DAEs</a></li><li><a class="tocitem" href="../../examples/remake/">Optimizing through an ODE solve and re-creating MTK Problems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Advanced Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/tearing_parallelism/">Exposing More Parallelism By Tearing Algebraic Equations in Systems</a></li><li><a class="tocitem" href="../../examples/sparse_jacobians/">Automated Sparse Analytical Jacobians</a></li><li><a class="tocitem" href="../../examples/perturbation/">Symbolic-Numeric Perturbation Theory for ODEs</a></li></ul></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../API/System/">The <code>System</code> type</a></li><li><a class="tocitem" href="../../API/variables/">Symbolic variables and variable metadata</a></li><li><a class="tocitem" href="../../API/model_building/">Model building reference</a></li><li><a class="tocitem" href="../../API/problems/">Building and solving numerical problems</a></li><li><a class="tocitem" href="../../API/dynamic_opt/">Dynamic Optimization Solvers</a></li><li><a class="tocitem" href="../../API/codegen/">Code generation utilities</a></li><li><a class="tocitem" href="../../API/PDESystem/">PDESystem</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../basics/Composition/">Composing Models and Building Reusable Components</a></li><li><a class="tocitem" href="../../basics/Events/">Event Handling and Callback Functions</a></li><li><a class="tocitem" href="../../basics/Linearization/">Linearization</a></li><li><a class="tocitem" href="../../basics/InputOutput/">Input output</a></li><li><a class="tocitem" href="../../basics/MTKLanguage/">ModelingToolkit Language: Modeling with <code>@mtkmodel</code>, <code>@connectors</code> and <code>@mtkcompile</code></a></li><li><a class="tocitem" href="../../basics/Validation/">Model Validation and Units</a></li><li><a class="tocitem" href="../../basics/Debugging/">Debugging</a></li><li><a class="tocitem" href="../../basics/DependencyGraphs/">Dependency Graphs</a></li><li><a class="tocitem" href="../../basics/Precompilation/">Working with Precompilation and Binary Building</a></li><li><a class="tocitem" href="../../basics/FAQ/">Frequently Asked Questions</a></li></ul></li><li><a class="tocitem" href="../../comparison/">Comparison of ModelingToolkit vs Equation-Based and Block Modeling Languages</a></li><li><a class="tocitem" href="../../internals/">Internal Details</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Linear Analysis</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Linear Analysis</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/ModelingToolkit.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/ModelingToolkit.jl/blob/master/docs/src/tutorials/linear_analysis.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Linear-Analysis"><a class="docs-heading-anchor" href="#Linear-Analysis">Linear Analysis</a><a id="Linear-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-Analysis" title="Permalink"></a></h1><p>Linear analysis refers to the process of linearizing a nonlinear model and analysing the resulting linear dynamical system. To facilitate linear analysis, ModelingToolkit provides the concept of an <a href="../disturbance_modeling/#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-disturbance_modeling"><code>AnalysisPoint</code></a>, which can be inserted in-between two causal blocks (such as those from <code>ModelingToolkitStandardLibrary.Blocks</code> sub module). Once a model containing analysis points is built, several operations are available:</p><ul><li><a href="../../API/problems/#ModelingToolkit.get_sensitivity"><code>get_sensitivity</code></a> get the <a href="https://en.wikipedia.org/wiki/Sensitivity_(control_systems)">sensitivity function (wiki)</a>, <span>$S(s)$</span>, as defined in the field of control theory.</li><li><a href="../../API/problems/#ModelingToolkit.get_comp_sensitivity"><code>get_comp_sensitivity</code></a> get the complementary sensitivity function <span>$T(s) : S(s)+T(s)=1$</span>.</li><li><a href="../../API/problems/#ModelingToolkit.get_looptransfer"><code>get_looptransfer</code></a> get the (open) loop-transfer function where the loop starts and ends in the analysis point. For a typical simple feedback connection with a plant <span>$P(s)$</span> and a controller <span>$C(s)$</span>, the loop-transfer function at the plant output is <span>$P(s)C(s)$</span>.</li><li><a href="../../API/problems/#ModelingToolkit.linearize"><code>linearize</code></a> can be called with two analysis points denoting the input and output of the linearized system.</li><li><a href="../../API/problems/#ModelingToolkit.open_loop"><code>open_loop</code></a> return a new (nonlinear) system where the loop has been broken in the analysis point, i.e., the connection the analysis point usually implies has been removed.</li></ul><p>An analysis point can be created explicitly using the constructor <a href="../disturbance_modeling/#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-disturbance_modeling"><code>AnalysisPoint</code></a>, or automatically when connecting two causal components using <code>connect</code>:</p><pre><code class="language-julia hljs">connect(comp1.output, :analysis_point_name, comp2.input)</code></pre><p>A single output can also be connected to multiple inputs:</p><pre><code class="language-julia hljs">connect(comp1.output, :analysis_point_name, comp2.input, comp3.input, comp4.input)</code></pre><div class="admonition is-warning" id="Causality-71bac6a0b05f64e1"><header class="admonition-header">Causality<a class="admonition-anchor" href="#Causality-71bac6a0b05f64e1" title="Permalink"></a></header><div class="admonition-body"><p>Analysis points are <em>causal</em>, i.e., they imply a directionality for the flow of information. The order of the connections in the connect statement is thus important, i.e., <code>connect(out, :name, in)</code> is different from <code>connect(in, :name, out)</code>.</p></div></div><p>The directionality of an analysis point can be thought of as an arrow in a block diagram, where the name of the analysis point applies to the arrow itself.</p><pre><code class="nohighlight hljs">┌─────┐         ┌─────┐
│     │  name   │     │
│  out├────────►│in   │
│     │         │     │
└─────┘         └─────┘</code></pre><p>This is signified by the name being the middle argument to <code>connect</code>.</p><p>Of the above mentioned functions, all except for <a href="../../API/problems/#ModelingToolkit.open_loop"><code>open_loop</code></a> return the output of <a href="../../API/problems/#ModelingToolkit.linearize"><code>ModelingToolkit.linearize</code></a>, which is</p><pre><code class="language-julia hljs">matrices, simplified_sys = linearize(...)
# matrices = (; A, B, C, D)</code></pre><p>i.e., <code>matrices</code> is a named tuple containing the matrices of a linear state-space system on the form</p><p class="math-container">\[\begin{aligned}
\dot x &amp;= Ax + Bu\\
y &amp;= Cx + Du
\end{aligned}\]</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p>The following example builds a simple closed-loop system with a plant <span>$P$</span> and a controller <span>$C$</span>. Two analysis points are inserted, one before and one after <span>$P$</span>. We then derive a number of sensitivity functions and show the corresponding code using the package ControlSystemBase.jl</p><pre><code class="language-julia hljs">using ModelingToolkitStandardLibrary.Blocks, ModelingToolkit
using ModelingToolkit: t_nounits as t

@named P = FirstOrder(k = 1, T = 1) # A first-order system with pole in -1
@named C = Gain(-1)             # A P controller

eqs = [connect(P.output, :plant_output, C.input)  # Connect with an automatically created analysis point called :plant_output
       connect(C.output, :plant_input, P.input)]
sys = System(eqs, t, systems = [P, C], name = :feedback_system)

matrices_S = get_sensitivity(sys, :plant_input)[1] # Compute the matrices of a state-space representation of the (input)sensitivity function.
matrices_T = get_comp_sensitivity(sys, :plant_input)[1]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(A = [-2.0;;], B = [-1.0;;], C = [-1.0;;], D = [0.0;;])</code></pre><p>Continued linear analysis and design can be performed using ControlSystemsBase.jl. We create <code>ControlSystemsBase.StateSpace</code> objects using</p><pre><code class="language-julia hljs">using ControlSystemsBase, Plots
S = ss(matrices_S...)
T = ss(matrices_T...)
bodeplot([S, T], lab = [&quot;S&quot; &quot;&quot; &quot;T&quot; &quot;&quot;], plot_title = &quot;Bode plot of sensitivity functions&quot;,
    margin = 5Plots.mm)</code></pre><img src="d355d93b.svg" alt="Example block output"/><p>The sensitivity functions obtained this way should be equivalent to the ones obtained with the code below</p><pre><code class="language-julia hljs">using ControlSystemsBase
P = tf(1.0, [1, 1]) |&gt; ss
C = 1                      # Negative feedback assumed in ControlSystems
S = sensitivity(P, C)      # or feedback(1, P*C)
T = comp_sensitivity(P, C) # or feedback(P*C)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ControlSystemsBase.StateSpace{ControlSystemsBase.Continuous, Float64}
A = 
 -2.0
B = 
 1.0
C = 
 1.0
D = 
 0.0

Continuous-time state-space model</code></pre><p>We may also derive the loop-transfer function <span>$L(s) = P(s)C(s)$</span> using</p><pre><code class="language-julia hljs">matrices_L = get_looptransfer(sys, :plant_output)[1]
L = ss(matrices_L...)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ControlSystemsBase.StateSpace{ControlSystemsBase.Continuous, Float64}
A = 
 -1.0
B = 
 -1.0
C = 
 1.0
D = 
 0.0

Continuous-time state-space model</code></pre><p>which is equivalent to the following with ControlSystems</p><pre><code class="language-julia hljs">L = P * (-C) # Add the minus sign to build the negative feedback into the controller</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ControlSystemsBase.StateSpace{ControlSystemsBase.Continuous, Float64}
A = 
 -1.0
B = 
 -1.0
C = 
 1.0
D = 
 -0.0

Continuous-time state-space model</code></pre><p>To obtain the transfer function between two analysis points, we call <code>linearize</code></p><pre><code class="language-julia hljs">matrices_PS = linearize(sys, :plant_input, :plant_output)[1]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(A = [-2.0;;], B = [1.0;;], C = [1.0;;], D = [0.0;;])</code></pre><p>this particular transfer function should be equivalent to the linear system <code>P(s)S(s)</code>, i.e., equivalent to</p><pre><code class="language-julia hljs">feedback(P, C)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ControlSystemsBase.StateSpace{ControlSystemsBase.Continuous, Float64}
A = 
 -2.0
B = 
 1.0
C = 
 1.0
D = 
 0.0

Continuous-time state-space model</code></pre><h3 id="Obtaining-transfer-functions"><a class="docs-heading-anchor" href="#Obtaining-transfer-functions">Obtaining transfer functions</a><a id="Obtaining-transfer-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Obtaining-transfer-functions" title="Permalink"></a></h3><p>A statespace system from <a href="https://juliacontrol.github.io/ControlSystems.jl/stable/man/creating_systems/">ControlSystemsBase</a> can be converted to a transfer function using the function <code>tf</code>:</p><pre><code class="language-julia hljs">tf(S)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ControlSystemsBase.TransferFunction{ControlSystemsBase.Continuous, ControlSystemsBase.SisoRational{Float64}}
1.0s + 1.0
----------
1.0s + 2.0

Continuous-time transfer function model</code></pre><h2 id="Gain-and-phase-margins"><a class="docs-heading-anchor" href="#Gain-and-phase-margins">Gain and phase margins</a><a id="Gain-and-phase-margins-1"></a><a class="docs-heading-anchor-permalink" href="#Gain-and-phase-margins" title="Permalink"></a></h2><p>Further linear analysis can be performed using the <a href="https://juliacontrol.github.io/ControlSystems.jl/stable/lib/analysis/">analysis methods from ControlSystemsBase</a>. For example, calculating the gain and phase margins of a system can be done using</p><pre><code class="language-julia hljs">margin(P)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(wgm = [NaN;;], gm = [Inf;;], wpm = [NaN;;], pm = [Inf;;])</code></pre><p>(they are infinite for this system). A Nyquist plot can be produced using</p><pre><code class="language-julia hljs">nyquistplot(P)</code></pre><img src="d75733e2.svg" alt="Example block output"/><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.connect-Tuple{ModelingToolkit.AbstractSystem, Symbol, Any, Vararg{Any}}-tutorials-linear_analysis" href="#ModelingToolkit.connect-Tuple{ModelingToolkit.AbstractSystem, Symbol, Any, Vararg{Any}}-tutorials-linear_analysis"><code>ModelingToolkit.connect</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect(output_connector, ap_name::Symbol, input_connector; verbose = true)
connect(output_connector, ap::AnalysisPoint, input_connector; verbose = true)</code></pre><p>Connect <code>output_connector</code> and <code>input_connector</code> with an <a href="../disturbance_modeling/#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-disturbance_modeling"><code>AnalysisPoint</code></a> inbetween. The incoming connection <code>output_connector</code> is expected to be an output connector (for example, <code>ModelingToolkitStandardLibrary.Blocks.RealOutput</code>), and vice versa.</p><p><em>PLEASE NOTE</em>: The connection is assumed to be <em>causal</em>, meaning that</p><pre><code class="language-julia hljs">@named P = FirstOrder(k = 1, T = 1)
@named C = Gain(; k = -1)
connect(C.output, :plant_input, P.input)</code></pre><p>is correct, whereas</p><pre><code class="language-julia hljs">connect(P.input, :plant_input, C.output)</code></pre><p>typically is not (unless the model is an inverse model).</p><p><strong>Arguments</strong></p><ul><li><code>output_connector</code>: An output connector</li><li><code>input_connector</code>: An input connector</li><li><code>ap</code>: An explicitly created <a href="../disturbance_modeling/#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-disturbance_modeling"><code>AnalysisPoint</code></a></li><li><code>ap_name</code>: If a name is given, an <a href="../disturbance_modeling/#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-disturbance_modeling"><code>AnalysisPoint</code></a> with the given name will be created automatically.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>verbose</code>: Warn if an input is connected to an output (reverse causality). Silence this warning if you are analyzing an inverse model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L185-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_comp_sensitivity-tutorials-linear_analysis" href="#ModelingToolkit.get_comp_sensitivity-tutorials-linear_analysis"><code>ModelingToolkit.get_comp_sensitivity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_comp_sensitivity(sys, ap::AnalysisPoint; kwargs)
get_comp_sensitivity(sys, ap_name::Symbol; kwargs)</code></pre><p>Compute the complementary sensitivity function in analysis point <code>ap</code>. The complementary sensitivity function is obtained by introducing an infinitesimal perturbation <code>d</code> at the output of <code>ap</code>, linearizing the system and computing the transfer function between <code>d</code> and the input of <code>ap</code>.</p><p><strong>Arguments:</strong></p><ul><li><code>kwargs</code>: Are sent to <code>ModelingToolkit.linearize</code></li></ul><p>See also <a href="../../API/problems/#ModelingToolkit.get_sensitivity"><code>get_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.get_looptransfer"><code>get_looptransfer</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L997-L1008">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_comp_sensitivity_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis" href="#ModelingToolkit.get_comp_sensitivity_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis"><code>ModelingToolkit.get_comp_sensitivity_function</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_comp_sensitivity_function(
    sys::ModelingToolkit.AbstractSystem,
    aps;
    kwargs...
) -&gt; Tuple{ModelingToolkit.LinearizationFunction{DI, AI, _A, P, _B, _C, J1, J2, J3, J4, IA, @NamedTuple{abstol::Float64, reltol::Float64, nlsolve_alg::NonlinearSolveFirstOrder.GeneralizedFirstOrderAlgorithm{Missing, NonlinearSolveFirstOrder.GenericTrustRegionScheme{NonlinearSolveFirstOrder.RadiusUpdateSchemes.__Simple, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}}, NonlinearSolveBase.Dogleg{NonlinearSolveBase.NewtonDescent{Nothing}, NonlinearSolveBase.SteepestDescent{Nothing}}, Nothing, Nothing, Nothing, Val{false}}}} where {DI&lt;:AbstractVector{Int64}, AI&lt;:AbstractVector{Int64}, _A, P&lt;:ODEProblem, _B, _C, J1&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, ModelingToolkit.var&quot;#uff#941&quot;{var&quot;#1460#fun&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#uff#941&quot;), _A, _B}), var&quot;#1460#fun&quot;, _A}}, J2&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, _A, _B, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:ForwardDiff.JacobianConfig, _A, _B}}, J3&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#pff#942&quot;{var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#pff#942&quot;), _A, _B}), var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;, _A}}, J4&lt;:(ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#hpf#940&quot;{fun, setter}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#hpf#940&quot;), _A, _B}), fun, setter, _A}), IA&lt;:Union{SciMLBase.NoInit, SciMLBase.OverrideInit{Nothing, Nothing, Nothing}}}, Any}
</code></pre><p>Return the complementary sensitivity function for the analysis point(s) <code>aps</code>, and the modified system simplified with the appropriate inputs and outputs.</p><p><strong>Keyword Arguments</strong></p><pre><code class="nohighlight hljs">- `loop_openings`: A list of analysis points whose connections should be removed and
  the outputs set to zero as a part of the linear analysis.

- `system_modifier`: A function taking the transformed system and applying any
  additional transformations, returning the modified system. The modified system
  is passed to `linearization_function`.</code></pre><p>All other keyword arguments are forwarded to <code>linearization_function</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L872-L884">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_looptransfer-tutorials-linear_analysis" href="#ModelingToolkit.get_looptransfer-tutorials-linear_analysis"><code>ModelingToolkit.get_looptransfer</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_looptransfer(sys, ap::AnalysisPoint; kwargs)
get_looptransfer(sys, ap_name::Symbol; kwargs)</code></pre><p>Compute the (linearized) loop-transfer function in analysis point <code>ap</code>, from <code>ap.out</code> to <code>ap.in</code>.</p><div class="admonition is-info" id="Negative-feedback-bdb37f4684a709de"><header class="admonition-header">Negative feedback<a class="admonition-anchor" href="#Negative-feedback-bdb37f4684a709de" title="Permalink"></a></header><div class="admonition-body"><p>Feedback loops often use negative feedback, and the computed loop-transfer function will in this case have the negative feedback included. Standard analysis tools often assume a loop-transfer function without the negative gain built in, and the result of this function may thus need negation before use.</p></div></div><p><strong>Arguments:</strong></p><ul><li><code>kwargs</code>: Are sent to <code>ModelingToolkit.linearize</code></li></ul><p>See also <a href="../../API/problems/#ModelingToolkit.get_sensitivity"><code>get_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.get_comp_sensitivity"><code>get_comp_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.open_loop"><code>open_loop</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L1010-L1025">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_looptransfer_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis" href="#ModelingToolkit.get_looptransfer_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis"><code>ModelingToolkit.get_looptransfer_function</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_looptransfer_function(
    sys::ModelingToolkit.AbstractSystem,
    aps;
    kwargs...
) -&gt; Tuple{ModelingToolkit.LinearizationFunction{DI, AI, _A, P, _B, _C, J1, J2, J3, J4, IA, @NamedTuple{abstol::Float64, reltol::Float64, nlsolve_alg::NonlinearSolveFirstOrder.GeneralizedFirstOrderAlgorithm{Missing, NonlinearSolveFirstOrder.GenericTrustRegionScheme{NonlinearSolveFirstOrder.RadiusUpdateSchemes.__Simple, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}}, NonlinearSolveBase.Dogleg{NonlinearSolveBase.NewtonDescent{Nothing}, NonlinearSolveBase.SteepestDescent{Nothing}}, Nothing, Nothing, Nothing, Val{false}}}} where {DI&lt;:AbstractVector{Int64}, AI&lt;:AbstractVector{Int64}, _A, P&lt;:ODEProblem, _B, _C, J1&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, ModelingToolkit.var&quot;#uff#941&quot;{var&quot;#1460#fun&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#uff#941&quot;), _A, _B}), var&quot;#1460#fun&quot;, _A}}, J2&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, _A, _B, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:ForwardDiff.JacobianConfig, _A, _B}}, J3&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#pff#942&quot;{var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#pff#942&quot;), _A, _B}), var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;, _A}}, J4&lt;:(ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#hpf#940&quot;{fun, setter}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#hpf#940&quot;), _A, _B}), fun, setter, _A}), IA&lt;:Union{SciMLBase.NoInit, SciMLBase.OverrideInit{Nothing, Nothing, Nothing}}}, Any}
</code></pre><p>Return the loop-transfer function for the analysis point(s) <code>aps</code>, and the modified system simplified with the appropriate inputs and outputs.</p><p><strong>Keyword Arguments</strong></p><pre><code class="nohighlight hljs">- `loop_openings`: A list of analysis points whose connections should be removed and
  the outputs set to zero as a part of the linear analysis.

- `system_modifier`: A function taking the transformed system and applying any
  additional transformations, returning the modified system. The modified system
  is passed to `linearization_function`.</code></pre><p>All other keyword arguments are forwarded to <code>linearization_function</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L889-L901">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_sensitivity-tutorials-linear_analysis" href="#ModelingToolkit.get_sensitivity-tutorials-linear_analysis"><code>ModelingToolkit.get_sensitivity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    get_sensitivity(sys, ap::AnalysisPoint; kwargs)
    get_sensitivity(sys, ap_name::Symbol; kwargs)</code></pre><p>Compute the sensitivity function in analysis point <code>ap</code>. The sensitivity function is obtained by introducing an infinitesimal perturbation <code>d</code> at the input of <code>ap</code>, linearizing the system and computing the transfer function between <code>d</code> and the output of <code>ap</code>.</p><p><strong>Arguments:</strong></p><ul><li><code>kwargs</code>: Are sent to <code>ModelingToolkit.linearize</code></li></ul><p>See also <a href="../../API/problems/#ModelingToolkit.get_comp_sensitivity"><code>get_comp_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.get_looptransfer"><code>get_looptransfer</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L984-L995">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.get_sensitivity_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis" href="#ModelingToolkit.get_sensitivity_function-Tuple{ModelingToolkit.AbstractSystem, Any}-tutorials-linear_analysis"><code>ModelingToolkit.get_sensitivity_function</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_sensitivity_function(
    sys::ModelingToolkit.AbstractSystem,
    aps;
    kwargs...
) -&gt; Tuple{ModelingToolkit.LinearizationFunction{DI, AI, _A, P, _B, _C, J1, J2, J3, J4, IA, @NamedTuple{abstol::Float64, reltol::Float64, nlsolve_alg::NonlinearSolveFirstOrder.GeneralizedFirstOrderAlgorithm{Missing, NonlinearSolveFirstOrder.GenericTrustRegionScheme{NonlinearSolveFirstOrder.RadiusUpdateSchemes.__Simple, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}, Rational{Int64}}, NonlinearSolveBase.Dogleg{NonlinearSolveBase.NewtonDescent{Nothing}, NonlinearSolveBase.SteepestDescent{Nothing}}, Nothing, Nothing, Nothing, Val{false}}}} where {DI&lt;:AbstractVector{Int64}, AI&lt;:AbstractVector{Int64}, _A, P&lt;:ODEProblem, _B, _C, J1&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, ModelingToolkit.var&quot;#uff#941&quot;{var&quot;#1460#fun&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#uff#941&quot;), _A, _B}), var&quot;#1460#fun&quot;, _A}}, J2&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing}}, _A, _B, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:ForwardDiff.JacobianConfig, _A, _B}}, J3&lt;:Union{Nothing, ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#pff#942&quot;{var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#pff#942&quot;), _A, _B}), var&quot;#1461#fun&quot;, var&quot;#1462#setter&quot;, _A}}, J4&lt;:(ModelingToolkit.PreparedJacobian{true, DifferentiationInterfaceForwardDiffExt.ForwardDiffTwoArgJacobianPrep{Nothing, C, Tuple{Nothing, Nothing, Nothing}}, ModelingToolkit.var&quot;#hpf#940&quot;{fun, setter}, _A, ADTypes.AutoForwardDiff{nothing, Nothing}} where {C&lt;:(ForwardDiff.JacobianConfig{T, _A, _B, &lt;:Tuple{Any, Any}} where {T&lt;:(ForwardDiff.Tag{F} where F&lt;:ModelingToolkit.var&quot;#hpf#940&quot;), _A, _B}), fun, setter, _A}), IA&lt;:Union{SciMLBase.NoInit, SciMLBase.OverrideInit{Nothing, Nothing, Nothing}}}, Any}
</code></pre><p>Return the sensitivity function for the analysis point(s) <code>aps</code>, and the modified system simplified with the appropriate inputs and outputs.</p><p><strong>Keyword Arguments</strong></p><pre><code class="nohighlight hljs">- `loop_openings`: A list of analysis points whose connections should be removed and
  the outputs set to zero as a part of the linear analysis.

- `system_modifier`: A function taking the transformed system and applying any
  additional transformations, returning the modified system. The modified system
  is passed to `linearization_function`.</code></pre><p>All other keyword arguments are forwarded to <code>linearization_function</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L855-L867">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.linearization_ap_transform-Tuple{Any, Union{Vector{Symbol}, Vector{AnalysisPoint}, Symbol, AnalysisPoint}, Any, Any}-tutorials-linear_analysis" href="#ModelingToolkit.linearization_ap_transform-Tuple{Any, Union{Vector{Symbol}, Vector{AnalysisPoint}, Symbol, AnalysisPoint}, Any, Any}-tutorials-linear_analysis"><code>ModelingToolkit.linearization_ap_transform</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sys, input_vars, output_vars =</code></pre><pre><code class="language-julia hljs">linearization_ap_transform(
    sys,
    inputs::Union{Vector{Symbol}, Vector{AnalysisPoint}, Symbol, AnalysisPoint},
    outputs,
    loop_openings
) -&gt; Tuple{Any, Vector{Any}, Vector{Any}}
</code></pre><p>Apply analysis-point transformations to prepare a system for linearization.</p><p>Returns</p><ul><li><code>sys</code>: The transformed system.</li><li><code>input_vars</code>: A vector of input variables corresponding to the input analysis points.</li><li><code>output_vars</code>: A vector of output variables corresponding to the output analysis points.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L935-L944">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.open_loop-Tuple{Any, Union{Symbol, AnalysisPoint}}-tutorials-linear_analysis" href="#ModelingToolkit.open_loop-Tuple{Any, Union{Symbol, AnalysisPoint}}-tutorials-linear_analysis"><code>ModelingToolkit.open_loop</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">open_loop(
    sys,
    ap::Union{Symbol, AnalysisPoint};
    system_modifier
) -&gt; Tuple{Any, Tuple{Any, Any}}
</code></pre><p>Apply <code>LoopTransferTransform</code> to the analysis point <code>ap</code> and return the result of <code>apply_transformation</code>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>system_modifier</code>: a function which takes the modified system and returns a new system with any required further modifications performed.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L917-L927">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-linear_analysis" href="#ModelingToolkit.AnalysisPoint-Tuple{Symbol}-tutorials-linear_analysis"><code>ModelingToolkit.AnalysisPoint</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AnalysisPoint(name::Symbol) -&gt; AnalysisPoint
</code></pre><p>Create an <code>AnalysisPoint</code> with the given name, with no input or outputs specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L108-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelingToolkit.AnalysisPoint-tutorials-linear_analysis" href="#ModelingToolkit.AnalysisPoint-tutorials-linear_analysis"><code>ModelingToolkit.AnalysisPoint</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct AnalysisPoint</code></pre><pre><code class="nohighlight hljs">AnalysisPoint(input, name::Symbol, outputs::Vector)</code></pre><p>Create an AnalysisPoint for linear analysis. Analysis points can be created by calling</p><pre><code class="nohighlight hljs">connect(out, :ap_name, in...)</code></pre><p>Where <code>out</code> is the output being connected to the inputs <code>in...</code>. All involved connectors (input and outputs) are required to either have an unknown named <code>u</code> or a single unknown, all of which should have the same size.</p><p>See also <a href="../../API/problems/#ModelingToolkit.get_sensitivity"><code>get_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.get_comp_sensitivity"><code>get_comp_sensitivity</code></a>, <a href="../../API/problems/#ModelingToolkit.get_looptransfer"><code>get_looptransfer</code></a>, <a href="../../API/problems/#ModelingToolkit.open_loop"><code>open_loop</code></a></p><p><strong>Fields</strong></p><ul><li><code>input::Any</code>: The input to the connection. In the context of ModelingToolkitStandardLibrary.jl, this is a <code>RealOutput</code> connector.</li></ul><ul><li><code>name::Symbol</code>: The name of the analysis point.</li></ul><ul><li><code>outputs::Union{Nothing, Vector{Any}}</code>: The outputs of the connection. In the context of ModelingToolkitStandardLibrary.jl, these are all <code>RealInput</code> connectors.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">using ModelingToolkit
using ModelingToolkitStandardLibrary.Blocks
using ModelingToolkit: t_nounits as t

@named P = FirstOrder(k = 1, T = 1)
@named C = Gain(; k = -1)
t = ModelingToolkit.get_iv(P)

eqs = [connect(P.output, C.input)
       connect(C.output, :plant_input, P.input)]
sys = System(eqs, t, systems = [P, C], name = :feedback_system)

matrices_S, _ = get_sensitivity(sys, :plant_input) # Compute the matrices of a state-space representation of the (input) sensitivity function.
matrices_T, _ = get_comp_sensitivity(sys, :plant_input)</code></pre><p>Continued linear analysis and design can be performed using ControlSystemsBase.jl. Create <code>ControlSystemsBase.StateSpace</code> objects using</p><pre><code class="language-julia hljs">using ControlSystemsBase, Plots
S = ss(matrices_S...)
T = ss(matrices_T...)
bodeplot([S, T], lab = [&quot;S&quot; &quot;T&quot;])</code></pre><p>The sensitivity functions obtained this way should be equivalent to the ones obtained with the code below</p><pre><code class="language-julia hljs">using ControlSystemsBase
P = tf(1.0, [1, 1])
C = 1                      # Negative feedback assumed in ControlSystems
S = sensitivity(P, C)      # or feedback(1, P*C)
T = comp_sensitivity(P, C) # or feedback(P*C)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/ModelingToolkit.jl/blob/7393a3dc3700232d599c194dcc5d2359c5b06980/src/systems/analysis_points.jl#L1-L59">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../callable_params/">« Callable parameters and interpolating data</a><a class="docs-footer-nextpage" href="../disturbance_modeling/">Disturbance and input modeling modeling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.12.0 on <span class="colophon-date" title="Wednesday 18 June 2025 12:00">Wednesday 18 June 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
